// THIS FILE IS GENERATED BY scripts/build.js — DO NOT EDIT MANUALLY.
// Run `npm run build` to regenerate from teleprompter.html.
const HTML = "<!DOCTYPE html>\n<html lang=\"en\" data-theme=\"night\" data-accent=\"gold\">\n<head>\n<meta charset=\"UTF-8\">\n<meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n<title>Glasspane</title>\n<style>\n  /* ============================================================\n     THEMES\n     ============================================================ */\n\n  /* Night (default) */\n  [data-theme=\"night\"] {\n    --bg: #0c0c0e;\n    --text: #d8d8dc;\n    --text-dim: #8a8a92;\n    --slide-bg: #16161a;\n    --progress-bg: #1c1c22;\n    --hint-bg: #141418;\n    --hint-border: #222;\n    --divider: #222;\n    --pip-bg: #2a2a30;\n    --pip-border: #444;\n    --scroll-indicator-bg: rgba(16, 16, 20, 0.94);\n    --timer-bg: rgba(12, 12, 14, 0.85);\n    --settings-bg: rgba(16, 16, 20, 0.96);\n    --settings-border: #333;\n  }\n\n  /* Navy */\n  [data-theme=\"navy\"] {\n    --bg: #0a0f1e;\n    --text: #d0d8f0;\n    --text-dim: #7a84a0;\n    --slide-bg: #111830;\n    --progress-bg: #141a2e;\n    --hint-bg: #0e1428;\n    --hint-border: #1e2a48;\n    --divider: #1e2a48;\n    --pip-bg: #1a2240;\n    --pip-border: #2e3a58;\n    --scroll-indicator-bg: rgba(10, 15, 30, 0.94);\n    --timer-bg: rgba(10, 15, 30, 0.85);\n    --settings-bg: rgba(10, 15, 30, 0.96);\n    --settings-border: #2e3a58;\n  }\n\n  /* Day */\n  [data-theme=\"day\"] {\n    --bg: #f8f7f4;\n    --text: #1a1a1a;\n    --text-dim: #6e6e6e;\n    --slide-bg: #eeedea;\n    --progress-bg: #e0dfdc;\n    --hint-bg: #f0efec;\n    --hint-border: #d8d7d4;\n    --divider: #d8d7d4;\n    --pip-bg: #d0cfcc;\n    --pip-border: #b0afac;\n    --scroll-indicator-bg: rgba(248, 247, 244, 0.94);\n    --timer-bg: rgba(248, 247, 244, 0.85);\n    --settings-bg: rgba(248, 247, 244, 0.96);\n    --settings-border: #b0afac;\n  }\n\n  /* Auto — follows system preference */\n  @media (prefers-color-scheme: dark) {\n    [data-theme=\"auto\"] {\n      --bg: #0c0c0e;\n      --text: #d8d8dc;\n      --text-dim: #8a8a92;\n      --slide-bg: #16161a;\n      --progress-bg: #1c1c22;\n      --hint-bg: #141418;\n      --hint-border: #222;\n      --divider: #222;\n      --pip-bg: #2a2a30;\n      --pip-border: #444;\n      --scroll-indicator-bg: rgba(16, 16, 20, 0.94);\n      --timer-bg: rgba(12, 12, 14, 0.85);\n      --settings-bg: rgba(16, 16, 20, 0.96);\n      --settings-border: #333;\n    }\n  }\n  @media (prefers-color-scheme: light) {\n    [data-theme=\"auto\"] {\n      --bg: #f8f7f4;\n      --text: #1a1a1a;\n      --text-dim: #6e6e6e;\n      --slide-bg: #eeedea;\n      --progress-bg: #e0dfdc;\n      --hint-bg: #f0efec;\n      --hint-border: #d8d7d4;\n      --divider: #d8d7d4;\n      --pip-bg: #d0cfcc;\n      --pip-border: #b0afac;\n      --scroll-indicator-bg: rgba(248, 247, 244, 0.94);\n      --timer-bg: rgba(248, 247, 244, 0.85);\n      --settings-bg: rgba(248, 247, 244, 0.96);\n      --settings-border: #b0afac;\n    }\n  }\n\n  /* ============================================================\n     ACCENTS\n     ============================================================ */\n\n  /* Gold (default) */\n  [data-accent=\"gold\"] {\n    --accent: #c9a84c;\n    --click: #e05a40;\n    --highlight: rgba(201, 168, 76, 0.18);\n    --highlight-border: #c9a84c;\n    --slide-border: #c9a84c;\n    --scroll-active: #4aba7a;\n    --slow-color: #f0c060;\n  }\n\n  /* Teal */\n  [data-accent=\"teal\"] {\n    --accent: #3dbfa8;\n    --click: #e05a40;\n    --highlight: rgba(61, 191, 168, 0.18);\n    --highlight-border: #3dbfa8;\n    --slide-border: #3dbfa8;\n    --scroll-active: #4aba7a;\n    --slow-color: #5dd8c0;\n  }\n\n  /* ============================================================\n     RESET & BASE\n     ============================================================ */\n\n  * { margin: 0; padding: 0; box-sizing: border-box; }\n\n  html {\n    scroll-behavior: smooth;\n    scrollbar-width: thin;\n    scrollbar-color: #333 var(--bg);\n  }\n\n  body {\n    background: var(--bg);\n    color: var(--text);\n    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', system-ui, sans-serif;\n    font-size: 22px;\n    line-height: 1.85;\n    -webkit-font-smoothing: antialiased;\n    padding: 0;\n  }\n\n  /* ============================================================\n     DROP ZONE — initial screen\n     ============================================================ */\n\n  #drop-zone {\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    justify-content: center;\n    min-height: 100vh;\n    padding: 32px;\n    gap: 32px;\n  }\n\n  .wordmark {\n    font-size: 28px;\n    font-weight: 600;\n    letter-spacing: 0.06em;\n    color: var(--text);\n    text-transform: uppercase;\n  }\n\n  .wordmark-sub {\n    display: block;\n    font-size: 13px;\n    font-weight: 400;\n    letter-spacing: 0.04em;\n    color: var(--text-dim);\n    text-transform: none;\n    margin-top: 4px;\n  }\n\n  #dropTarget {\n    width: 360px;\n    max-width: 90vw;\n    padding: 48px 32px;\n    border: 2px dashed var(--pip-border);\n    border-radius: 12px;\n    text-align: center;\n    color: var(--text-dim);\n    font-size: 15px;\n    cursor: pointer;\n    transition: border-color 0.15s ease, background 0.15s ease;\n  }\n\n  #dropTarget.drag-over {\n    border-color: var(--accent);\n    background: var(--highlight);\n  }\n\n  #dropTarget:hover {\n    border-color: var(--accent);\n  }\n\n  .drop-label {\n    display: block;\n    cursor: pointer;\n  }\n\n  .drop-or {\n    display: block;\n    margin-top: 8px;\n    font-size: 12px;\n    color: var(--text-dim);\n    opacity: 0.6;\n  }\n\n  #fileInput {\n    display: none;\n  }\n\n  #demoLink {\n    color: var(--accent);\n    font-size: 14px;\n    text-decoration: none;\n    border-bottom: 1px solid transparent;\n    transition: border-color 0.15s ease;\n  }\n\n  #demoLink:hover {\n    border-bottom-color: var(--accent);\n  }\n\n  /* ============================================================\n     PROGRESS BAR\n     ============================================================ */\n\n  .progress-bar {\n    position: fixed;\n    top: 0;\n    left: 0;\n    right: 0;\n    height: 3px;\n    background: var(--progress-bg);\n    z-index: 100;\n  }\n  .progress-fill {\n    height: 100%;\n    background: var(--slide-border);\n    width: 0%;\n    transition: width 0.3s ease;\n  }\n\n  /* ============================================================\n     SLIDE NAV\n     ============================================================ */\n\n  .slide-nav {\n    position: fixed;\n    top: 12px;\n    right: 56px;\n    z-index: 100;\n    display: flex;\n    gap: 6px;\n    align-items: center;\n  }\n  .slide-pip {\n    width: 10px;\n    height: 10px;\n    border-radius: 50%;\n    background: var(--pip-bg);\n    border: 1.5px solid var(--pip-border);\n    cursor: pointer;\n    transition: all 0.2s ease;\n  }\n  .slide-pip.active {\n    background: var(--slide-border);\n    border-color: var(--slide-border);\n    transform: scale(1.3);\n  }\n  .slide-pip:hover {\n    border-color: var(--slide-border);\n  }\n\n  /* ============================================================\n     CONTAINER\n     ============================================================ */\n\n  .container {\n    max-width: 720px;\n    margin: 0 auto;\n    padding: 60px 32px 80vh;\n  }\n\n  /* ============================================================\n     HINT BANNER\n     ============================================================ */\n\n  .hint {\n    text-align: center;\n    color: var(--text-dim);\n    font-size: 13px;\n    letter-spacing: 0.04em;\n    margin-bottom: 48px;\n    padding: 12px 16px;\n    background: var(--hint-bg);\n    border-radius: 8px;\n    border: 1px solid var(--hint-border);\n    line-height: 1.7;\n  }\n  .hint kbd {\n    display: inline-block;\n    background: var(--hint-border);\n    color: var(--text-dim);\n    border: 1px solid var(--pip-border);\n    border-radius: 4px;\n    padding: 1px 6px;\n    font-family: inherit;\n    font-size: 12px;\n    margin: 0 2px;\n  }\n  .hint-divider {\n    display: block;\n    margin: 4px 0;\n    border-top: 1px solid var(--hint-border);\n  }\n\n  /* ============================================================\n     SLIDE HEADERS\n     ============================================================ */\n\n  .slide-header {\n    font-size: 14px;\n    font-weight: 600;\n    letter-spacing: 0.12em;\n    text-transform: uppercase;\n    color: var(--slide-border);\n    background: var(--slide-bg);\n    border-left: 3px solid var(--slide-border);\n    padding: 14px 20px;\n    margin: 64px 0 32px;\n    border-radius: 0 6px 6px 0;\n  }\n  .slide-header:first-of-type {\n    margin-top: 0;\n  }\n\n  /* ============================================================\n     PARAGRAPHS (clickable)\n     ============================================================ */\n\n  .line {\n    padding: 8px 16px;\n    margin: 4px 0;\n    border-left: 3px solid transparent;\n    border-radius: 0 4px 4px 0;\n    cursor: pointer;\n    transition: background 0.15s ease, border-color 0.15s ease;\n  }\n  .line:hover {\n    background: rgba(255,255,255,0.02);\n  }\n  .line.active {\n    background: var(--highlight);\n    border-left-color: var(--highlight-border);\n  }\n\n  /* ============================================================\n     STAGE DIRECTIONS\n     ============================================================ */\n\n  .d {\n    color: var(--accent);\n    font-size: 15px;\n    font-weight: 500;\n    opacity: 0.85;\n    white-space: nowrap;\n  }\n  .d-click {\n    display: inline-block;\n    background: var(--click);\n    color: #fff;\n    font-size: 12px;\n    font-weight: 700;\n    letter-spacing: 0.08em;\n    padding: 2px 10px;\n    border-radius: 4px;\n    margin: 16px 0 8px;\n  }\n  .d-pause {\n    display: block;\n    color: var(--text-dim);\n    font-size: 14px;\n    font-style: italic;\n    padding: 6px 0;\n    margin: 4px 0;\n  }\n  .d-note {\n    font-size: 14px;\n    color: var(--text-dim);\n    font-style: italic;\n  }\n\n  /* ============================================================\n     EMPHASIS IN SPOKEN TEXT\n     ============================================================ */\n\n  .slow {\n    color: var(--slow-color);\n    font-weight: 500;\n  }\n\n  /* ============================================================\n     DIVIDER BETWEEN SLIDES\n     ============================================================ */\n\n  .slide-divider {\n    border: none;\n    border-top: 1px solid var(--divider);\n    margin: 48px 0 16px;\n  }\n\n  /* ============================================================\n     TIMER (top-left)\n     ============================================================ */\n\n  .timer {\n    position: fixed;\n    top: 10px;\n    left: 20px;\n    z-index: 100;\n    font-size: 16px;\n    font-variant-numeric: tabular-nums;\n    color: var(--text-dim);\n    font-weight: 500;\n    cursor: pointer;\n    user-select: none;\n    background: var(--timer-bg);\n    padding: 4px 12px;\n    border-radius: 6px;\n    backdrop-filter: blur(8px);\n    border: 1px solid var(--hint-border);\n  }\n  .timer.running {\n    color: var(--accent);\n  }\n  .timer-label {\n    font-size: 11px;\n    letter-spacing: 0.06em;\n    text-transform: uppercase;\n    opacity: 0.6;\n    margin-right: 6px;\n  }\n\n  /* ============================================================\n     AUTO-SCROLL INDICATOR\n     ============================================================ */\n\n  .scroll-indicator {\n    position: fixed;\n    bottom: 28px;\n    left: 50%;\n    transform: translateX(-50%) translateY(70px);\n    z-index: 200;\n    background: var(--scroll-indicator-bg);\n    border: 1.5px solid var(--scroll-active);\n    border-radius: 10px;\n    padding: 10px 24px;\n    display: flex;\n    align-items: center;\n    gap: 14px;\n    font-size: 13px;\n    font-weight: 500;\n    letter-spacing: 0.03em;\n    color: var(--scroll-active);\n    backdrop-filter: blur(12px);\n    opacity: 0;\n    transition: opacity 0.15s ease, transform 0.15s ease;\n    pointer-events: none;\n    user-select: none;\n    box-shadow: 0 4px 20px rgba(0,0,0,0.5);\n  }\n  .scroll-indicator.visible {\n    opacity: 1;\n    transform: translateX(-50%) translateY(0);\n  }\n  .scroll-indicator .scroll-label {\n    font-size: 11px;\n    letter-spacing: 0.1em;\n    text-transform: uppercase;\n  }\n  .scroll-indicator .scroll-dots {\n    display: flex;\n    gap: 5px;\n    align-items: center;\n  }\n  .scroll-indicator .dot {\n    width: 7px;\n    height: 7px;\n    border-radius: 50%;\n    background: var(--pip-bg);\n    border: 1px solid var(--pip-border);\n    transition: background 0.1s ease, border-color 0.1s ease;\n  }\n  .scroll-indicator .dot.filled {\n    background: var(--scroll-active);\n    border-color: var(--scroll-active);\n  }\n  .scroll-indicator .scroll-speed-name {\n    min-width: 64px;\n    text-align: center;\n    font-variant-numeric: tabular-nums;\n  }\n  .scroll-indicator .scroll-hint {\n    font-size: 11px;\n    color: var(--text-dim);\n    opacity: 0.7;\n  }\n\n  /* ============================================================\n     SCROLL-ACTIVE BORDER GLOW\n     ============================================================ */\n\n  .scroll-border-glow {\n    position: fixed;\n    top: 0;\n    left: 0;\n    right: 0;\n    height: 3px;\n    background: var(--scroll-active);\n    z-index: 99;\n    opacity: 0;\n    transition: opacity 0.15s ease;\n  }\n  .scroll-border-glow.visible {\n    opacity: 1;\n  }\n\n  /* ============================================================\n     SETTINGS BUTTON & PANEL\n     ============================================================ */\n\n  .settings-btn {\n    position: fixed;\n    top: 8px;\n    right: 16px;\n    z-index: 110;\n    width: 32px;\n    height: 32px;\n    border: none;\n    background: transparent;\n    color: var(--text-dim);\n    font-size: 18px;\n    cursor: pointer;\n    border-radius: 6px;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    transition: color 0.15s ease, background 0.15s ease;\n  }\n  .settings-btn:hover {\n    color: var(--text);\n    background: var(--hint-bg);\n  }\n\n  .settings-panel {\n    display: none;\n    position: fixed;\n    top: 44px;\n    right: 16px;\n    z-index: 110;\n    background: var(--settings-bg);\n    border: 1px solid var(--settings-border);\n    border-radius: 10px;\n    padding: 20px 24px;\n    backdrop-filter: blur(16px);\n    min-width: 200px;\n    box-shadow: 0 8px 32px rgba(0,0,0,0.4);\n  }\n  .settings-panel.visible {\n    display: block;\n  }\n\n  .settings-group {\n    margin-bottom: 16px;\n  }\n  .settings-group:last-child {\n    margin-bottom: 0;\n  }\n  .settings-group-label {\n    font-size: 11px;\n    font-weight: 600;\n    letter-spacing: 0.1em;\n    text-transform: uppercase;\n    color: var(--text-dim);\n    margin-bottom: 8px;\n  }\n  .settings-group label {\n    display: block;\n    font-size: 14px;\n    color: var(--text);\n    cursor: pointer;\n    padding: 3px 0;\n  }\n  .settings-group label input[type=\"radio\"] {\n    margin-right: 8px;\n    accent-color: var(--accent);\n  }\n\n  .settings-panel button {\n    width: 100%;\n    margin-top: 12px;\n    padding: 8px 16px;\n    font-size: 13px;\n    font-weight: 500;\n    color: var(--text);\n    background: var(--hint-bg);\n    border: 1px solid var(--hint-border);\n    border-radius: 6px;\n    cursor: pointer;\n    transition: border-color 0.15s ease;\n  }\n  .settings-panel button:hover {\n    border-color: var(--accent);\n  }\n\n  /* ============================================================\n     PRINT\n     ============================================================ */\n\n  @media print {\n    body { background: #fff; color: #111; font-size: 14px; line-height: 1.6; }\n    .progress-bar, .slide-nav, .timer, .hint, .scroll-indicator, .scroll-border-glow, .settings-btn, .settings-panel, #drop-zone { display: none; }\n    .container { max-width: 100%; padding: 20px; }\n    .slide-header { background: #f5f5f5; color: #333; border-left-color: #333; }\n    .line { border-left: none; padding: 2px 0; }\n    .d { color: #888; }\n    .d-click { background: #666; }\n  }\n</style>\n</head>\n<body data-script-id=\"\">\n\n<!-- ============================================================\n     DROP ZONE — initial screen\n     ============================================================ -->\n<div id=\"drop-zone\">\n  <div class=\"wordmark\">\n    Glasspane\n    <span class=\"wordmark-sub\">Browser teleprompter</span>\n  </div>\n\n  <label class=\"drop-label\" for=\"fileInput\">\n    <div id=\"dropTarget\">\n      Drop a .md script here\n      <span class=\"drop-or\">or click to browse</span>\n    </div>\n  </label>\n  <input type=\"file\" id=\"fileInput\" accept=\".md,text/markdown\">\n\n  <a href=\"#\" id=\"demoLink\">Try the demo</a>\n</div>\n\n<!-- ============================================================\n     TELEPROMPTER — hidden until a script is loaded\n     ============================================================ -->\n<div id=\"teleprompter\" style=\"display: none\">\n\n  <!-- Progress bar -->\n  <div class=\"progress-bar\"><div class=\"progress-fill\" id=\"progressFill\"></div></div>\n\n  <!-- Green glow bar under progress bar when auto-scrolling -->\n  <div class=\"scroll-border-glow\" id=\"scrollGlow\"></div>\n\n  <!-- Timer -->\n  <div class=\"timer\" id=\"timer\" title=\"Click to start/stop\">\n    <span class=\"timer-label\">Timer</span>\n    <span id=\"timerDisplay\">00:00</span>\n  </div>\n\n  <!-- Slide navigation pips (populated dynamically) -->\n  <div class=\"slide-nav\" id=\"slideNav\"></div>\n\n  <!-- Settings button -->\n  <button class=\"settings-btn\" id=\"settingsBtn\" title=\"Settings\" aria-label=\"Settings\">&#9881;</button>\n\n  <!-- Settings panel -->\n  <div class=\"settings-panel\" id=\"settingsPanel\">\n    <div class=\"settings-group\">\n      <div class=\"settings-group-label\">Theme</div>\n      <label><input type=\"radio\" name=\"theme\" value=\"night\"> Night</label>\n      <label><input type=\"radio\" name=\"theme\" value=\"navy\"> Navy</label>\n      <label><input type=\"radio\" name=\"theme\" value=\"day\"> Day</label>\n      <label><input type=\"radio\" name=\"theme\" value=\"auto\"> Auto</label>\n    </div>\n    <div class=\"settings-group\">\n      <div class=\"settings-group-label\">Accent</div>\n      <label><input type=\"radio\" name=\"accent\" value=\"gold\"> Gold</label>\n      <label><input type=\"radio\" name=\"accent\" value=\"teal\"> Teal</label>\n    </div>\n    <button id=\"loadNewBtn\">Load new script</button>\n  </div>\n\n  <!-- Auto-scroll indicator -->\n  <div class=\"scroll-indicator\" id=\"scrollIndicator\">\n    <span class=\"scroll-label\">Auto &#9654;</span>\n    <span class=\"scroll-dots\" id=\"scrollDots\">\n      <span class=\"dot\"></span>\n      <span class=\"dot\"></span>\n      <span class=\"dot\"></span>\n      <span class=\"dot\"></span>\n      <span class=\"dot\"></span>\n      <span class=\"dot\"></span>\n      <span class=\"dot\"></span>\n    </span>\n    <span class=\"scroll-speed-name\" id=\"scrollSpeedName\">3</span>\n    <span class=\"scroll-hint\">&#8593;&#8595; speed &middot; click to stop</span>\n  </div>\n\n  <!-- Main content -->\n  <div class=\"container\" id=\"mainContainer\">\n    <div class=\"hint\">\n      <kbd>&#8595;</kbd> start auto-scroll &nbsp;&middot;&nbsp; click anywhere to stop &nbsp;&middot;&nbsp; <kbd>&#8593;</kbd><kbd>&#8595;</kbd> adjust speed while scrolling\n      <span class=\"hint-divider\"></span>\n      <kbd>j</kbd><kbd>k</kbd> move highlight &nbsp;&middot;&nbsp; Click paragraph to mark place &nbsp;&middot;&nbsp; Click timer to start/stop\n    </div>\n    <div id=\"scriptContent\"></div>\n  </div>\n\n</div>\n\n<script>/*! @license DOMPurify 3.3.1 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.3.1/LICENSE */\n!function(e,t){\"object\"==typeof exports&&\"undefined\"!=typeof module?module.exports=t():\"function\"==typeof define&&define.amd?define(t):(e=\"undefined\"!=typeof globalThis?globalThis:e||self).DOMPurify=t()}(this,(function(){\"use strict\";const{entries:e,setPrototypeOf:t,isFrozen:n,getPrototypeOf:o,getOwnPropertyDescriptor:r}=Object;let{freeze:i,seal:a,create:l}=Object,{apply:c,construct:s}=\"undefined\"!=typeof Reflect&&Reflect;i||(i=function(e){return e}),a||(a=function(e){return e}),c||(c=function(e,t){for(var n=arguments.length,o=new Array(n>2?n-2:0),r=2;r<n;r++)o[r-2]=arguments[r];return e.apply(t,o)}),s||(s=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];return new e(...n)});const u=D(Array.prototype.forEach),m=D(Array.prototype.lastIndexOf),p=D(Array.prototype.pop),f=D(Array.prototype.push),d=D(Array.prototype.splice),h=D(String.prototype.toLowerCase),g=D(String.prototype.toString),T=D(String.prototype.match),y=D(String.prototype.replace),E=D(String.prototype.indexOf),A=D(String.prototype.trim),_=D(Object.prototype.hasOwnProperty),b=D(RegExp.prototype.test),S=(N=TypeError,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return s(N,t)});var N;function D(e){return function(t){t instanceof RegExp&&(t.lastIndex=0);for(var n=arguments.length,o=new Array(n>1?n-1:0),r=1;r<n;r++)o[r-1]=arguments[r];return c(e,t,o)}}function R(e,o){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:h;t&&t(e,null);let i=o.length;for(;i--;){let t=o[i];if(\"string\"==typeof t){const e=r(t);e!==t&&(n(o)||(o[i]=e),t=e)}e[t]=!0}return e}function w(e){for(let t=0;t<e.length;t++){_(e,t)||(e[t]=null)}return e}function C(t){const n=l(null);for(const[o,r]of e(t)){_(t,o)&&(Array.isArray(r)?n[o]=w(r):r&&\"object\"==typeof r&&r.constructor===Object?n[o]=C(r):n[o]=r)}return n}function O(e,t){for(;null!==e;){const n=r(e,t);if(n){if(n.get)return D(n.get);if(\"function\"==typeof n.value)return D(n.value)}e=o(e)}return function(){return null}}const v=i([\"a\",\"abbr\",\"acronym\",\"address\",\"area\",\"article\",\"aside\",\"audio\",\"b\",\"bdi\",\"bdo\",\"big\",\"blink\",\"blockquote\",\"body\",\"br\",\"button\",\"canvas\",\"caption\",\"center\",\"cite\",\"code\",\"col\",\"colgroup\",\"content\",\"data\",\"datalist\",\"dd\",\"decorator\",\"del\",\"details\",\"dfn\",\"dialog\",\"dir\",\"div\",\"dl\",\"dt\",\"element\",\"em\",\"fieldset\",\"figcaption\",\"figure\",\"font\",\"footer\",\"form\",\"h1\",\"h2\",\"h3\",\"h4\",\"h5\",\"h6\",\"head\",\"header\",\"hgroup\",\"hr\",\"html\",\"i\",\"img\",\"input\",\"ins\",\"kbd\",\"label\",\"legend\",\"li\",\"main\",\"map\",\"mark\",\"marquee\",\"menu\",\"menuitem\",\"meter\",\"nav\",\"nobr\",\"ol\",\"optgroup\",\"option\",\"output\",\"p\",\"picture\",\"pre\",\"progress\",\"q\",\"rp\",\"rt\",\"ruby\",\"s\",\"samp\",\"search\",\"section\",\"select\",\"shadow\",\"slot\",\"small\",\"source\",\"spacer\",\"span\",\"strike\",\"strong\",\"style\",\"sub\",\"summary\",\"sup\",\"table\",\"tbody\",\"td\",\"template\",\"textarea\",\"tfoot\",\"th\",\"thead\",\"time\",\"tr\",\"track\",\"tt\",\"u\",\"ul\",\"var\",\"video\",\"wbr\"]),x=i([\"svg\",\"a\",\"altglyph\",\"altglyphdef\",\"altglyphitem\",\"animatecolor\",\"animatemotion\",\"animatetransform\",\"circle\",\"clippath\",\"defs\",\"desc\",\"ellipse\",\"enterkeyhint\",\"exportparts\",\"filter\",\"font\",\"g\",\"glyph\",\"glyphref\",\"hkern\",\"image\",\"inputmode\",\"line\",\"lineargradient\",\"marker\",\"mask\",\"metadata\",\"mpath\",\"part\",\"path\",\"pattern\",\"polygon\",\"polyline\",\"radialgradient\",\"rect\",\"stop\",\"style\",\"switch\",\"symbol\",\"text\",\"textpath\",\"title\",\"tref\",\"tspan\",\"view\",\"vkern\"]),L=i([\"feBlend\",\"feColorMatrix\",\"feComponentTransfer\",\"feComposite\",\"feConvolveMatrix\",\"feDiffuseLighting\",\"feDisplacementMap\",\"feDistantLight\",\"feDropShadow\",\"feFlood\",\"feFuncA\",\"feFuncB\",\"feFuncG\",\"feFuncR\",\"feGaussianBlur\",\"feImage\",\"feMerge\",\"feMergeNode\",\"feMorphology\",\"feOffset\",\"fePointLight\",\"feSpecularLighting\",\"feSpotLight\",\"feTile\",\"feTurbulence\"]),k=i([\"animate\",\"color-profile\",\"cursor\",\"discard\",\"font-face\",\"font-face-format\",\"font-face-name\",\"font-face-src\",\"font-face-uri\",\"foreignobject\",\"hatch\",\"hatchpath\",\"mesh\",\"meshgradient\",\"meshpatch\",\"meshrow\",\"missing-glyph\",\"script\",\"set\",\"solidcolor\",\"unknown\",\"use\"]),I=i([\"math\",\"menclose\",\"merror\",\"mfenced\",\"mfrac\",\"mglyph\",\"mi\",\"mlabeledtr\",\"mmultiscripts\",\"mn\",\"mo\",\"mover\",\"mpadded\",\"mphantom\",\"mroot\",\"mrow\",\"ms\",\"mspace\",\"msqrt\",\"mstyle\",\"msub\",\"msup\",\"msubsup\",\"mtable\",\"mtd\",\"mtext\",\"mtr\",\"munder\",\"munderover\",\"mprescripts\"]),M=i([\"maction\",\"maligngroup\",\"malignmark\",\"mlongdiv\",\"mscarries\",\"mscarry\",\"msgroup\",\"mstack\",\"msline\",\"msrow\",\"semantics\",\"annotation\",\"annotation-xml\",\"mprescripts\",\"none\"]),U=i([\"#text\"]),z=i([\"accept\",\"action\",\"align\",\"alt\",\"autocapitalize\",\"autocomplete\",\"autopictureinpicture\",\"autoplay\",\"background\",\"bgcolor\",\"border\",\"capture\",\"cellpadding\",\"cellspacing\",\"checked\",\"cite\",\"class\",\"clear\",\"color\",\"cols\",\"colspan\",\"controls\",\"controlslist\",\"coords\",\"crossorigin\",\"datetime\",\"decoding\",\"default\",\"dir\",\"disabled\",\"disablepictureinpicture\",\"disableremoteplayback\",\"download\",\"draggable\",\"enctype\",\"enterkeyhint\",\"exportparts\",\"face\",\"for\",\"headers\",\"height\",\"hidden\",\"high\",\"href\",\"hreflang\",\"id\",\"inert\",\"inputmode\",\"integrity\",\"ismap\",\"kind\",\"label\",\"lang\",\"list\",\"loading\",\"loop\",\"low\",\"max\",\"maxlength\",\"media\",\"method\",\"min\",\"minlength\",\"multiple\",\"muted\",\"name\",\"nonce\",\"noshade\",\"novalidate\",\"nowrap\",\"open\",\"optimum\",\"part\",\"pattern\",\"placeholder\",\"playsinline\",\"popover\",\"popovertarget\",\"popovertargetaction\",\"poster\",\"preload\",\"pubdate\",\"radiogroup\",\"readonly\",\"rel\",\"required\",\"rev\",\"reversed\",\"role\",\"rows\",\"rowspan\",\"spellcheck\",\"scope\",\"selected\",\"shape\",\"size\",\"sizes\",\"slot\",\"span\",\"srclang\",\"start\",\"src\",\"srcset\",\"step\",\"style\",\"summary\",\"tabindex\",\"title\",\"translate\",\"type\",\"usemap\",\"valign\",\"value\",\"width\",\"wrap\",\"xmlns\",\"slot\"]),P=i([\"accent-height\",\"accumulate\",\"additive\",\"alignment-baseline\",\"amplitude\",\"ascent\",\"attributename\",\"attributetype\",\"azimuth\",\"basefrequency\",\"baseline-shift\",\"begin\",\"bias\",\"by\",\"class\",\"clip\",\"clippathunits\",\"clip-path\",\"clip-rule\",\"color\",\"color-interpolation\",\"color-interpolation-filters\",\"color-profile\",\"color-rendering\",\"cx\",\"cy\",\"d\",\"dx\",\"dy\",\"diffuseconstant\",\"direction\",\"display\",\"divisor\",\"dur\",\"edgemode\",\"elevation\",\"end\",\"exponent\",\"fill\",\"fill-opacity\",\"fill-rule\",\"filter\",\"filterunits\",\"flood-color\",\"flood-opacity\",\"font-family\",\"font-size\",\"font-size-adjust\",\"font-stretch\",\"font-style\",\"font-variant\",\"font-weight\",\"fx\",\"fy\",\"g1\",\"g2\",\"glyph-name\",\"glyphref\",\"gradientunits\",\"gradienttransform\",\"height\",\"href\",\"id\",\"image-rendering\",\"in\",\"in2\",\"intercept\",\"k\",\"k1\",\"k2\",\"k3\",\"k4\",\"kerning\",\"keypoints\",\"keysplines\",\"keytimes\",\"lang\",\"lengthadjust\",\"letter-spacing\",\"kernelmatrix\",\"kernelunitlength\",\"lighting-color\",\"local\",\"marker-end\",\"marker-mid\",\"marker-start\",\"markerheight\",\"markerunits\",\"markerwidth\",\"maskcontentunits\",\"maskunits\",\"max\",\"mask\",\"mask-type\",\"media\",\"method\",\"mode\",\"min\",\"name\",\"numoctaves\",\"offset\",\"operator\",\"opacity\",\"order\",\"orient\",\"orientation\",\"origin\",\"overflow\",\"paint-order\",\"path\",\"pathlength\",\"patterncontentunits\",\"patterntransform\",\"patternunits\",\"points\",\"preservealpha\",\"preserveaspectratio\",\"primitiveunits\",\"r\",\"rx\",\"ry\",\"radius\",\"refx\",\"refy\",\"repeatcount\",\"repeatdur\",\"restart\",\"result\",\"rotate\",\"scale\",\"seed\",\"shape-rendering\",\"slope\",\"specularconstant\",\"specularexponent\",\"spreadmethod\",\"startoffset\",\"stddeviation\",\"stitchtiles\",\"stop-color\",\"stop-opacity\",\"stroke-dasharray\",\"stroke-dashoffset\",\"stroke-linecap\",\"stroke-linejoin\",\"stroke-miterlimit\",\"stroke-opacity\",\"stroke\",\"stroke-width\",\"style\",\"surfacescale\",\"systemlanguage\",\"tabindex\",\"tablevalues\",\"targetx\",\"targety\",\"transform\",\"transform-origin\",\"text-anchor\",\"text-decoration\",\"text-rendering\",\"textlength\",\"type\",\"u1\",\"u2\",\"unicode\",\"values\",\"viewbox\",\"visibility\",\"version\",\"vert-adv-y\",\"vert-origin-x\",\"vert-origin-y\",\"width\",\"word-spacing\",\"wrap\",\"writing-mode\",\"xchannelselector\",\"ychannelselector\",\"x\",\"x1\",\"x2\",\"xmlns\",\"y\",\"y1\",\"y2\",\"z\",\"zoomandpan\"]),F=i([\"accent\",\"accentunder\",\"align\",\"bevelled\",\"close\",\"columnsalign\",\"columnlines\",\"columnspan\",\"denomalign\",\"depth\",\"dir\",\"display\",\"displaystyle\",\"encoding\",\"fence\",\"frame\",\"height\",\"href\",\"id\",\"largeop\",\"length\",\"linethickness\",\"lspace\",\"lquote\",\"mathbackground\",\"mathcolor\",\"mathsize\",\"mathvariant\",\"maxsize\",\"minsize\",\"movablelimits\",\"notation\",\"numalign\",\"open\",\"rowalign\",\"rowlines\",\"rowspacing\",\"rowspan\",\"rspace\",\"rquote\",\"scriptlevel\",\"scriptminsize\",\"scriptsizemultiplier\",\"selection\",\"separator\",\"separators\",\"stretchy\",\"subscriptshift\",\"supscriptshift\",\"symmetric\",\"voffset\",\"width\",\"xmlns\"]),H=i([\"xlink:href\",\"xml:id\",\"xlink:title\",\"xml:space\",\"xmlns:xlink\"]),B=a(/\\{\\{[\\w\\W]*|[\\w\\W]*\\}\\}/gm),G=a(/<%[\\w\\W]*|[\\w\\W]*%>/gm),W=a(/\\$\\{[\\w\\W]*/gm),Y=a(/^data-[\\-\\w.\\u00B7-\\uFFFF]+$/),j=a(/^aria-[\\-\\w]+$/),X=a(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp|matrix):|[^a-z]|[a-z+.\\-]+(?:[^a-z+.\\-:]|$))/i),q=a(/^(?:\\w+script|data):/i),$=a(/[\\u0000-\\u0020\\u00A0\\u1680\\u180E\\u2000-\\u2029\\u205F\\u3000]/g),K=a(/^html$/i),V=a(/^[a-z][.\\w]*(-[.\\w]+)+$/i);var Z=Object.freeze({__proto__:null,ARIA_ATTR:j,ATTR_WHITESPACE:$,CUSTOM_ELEMENT:V,DATA_ATTR:Y,DOCTYPE_NAME:K,ERB_EXPR:G,IS_ALLOWED_URI:X,IS_SCRIPT_OR_DATA:q,MUSTACHE_EXPR:B,TMPLIT_EXPR:W});const J=1,Q=3,ee=7,te=8,ne=9,oe=function(){return\"undefined\"==typeof window?null:window};var re=function t(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:oe();const o=e=>t(e);if(o.version=\"3.3.1\",o.removed=[],!n||!n.document||n.document.nodeType!==ne||!n.Element)return o.isSupported=!1,o;let{document:r}=n;const a=r,c=a.currentScript,{DocumentFragment:s,HTMLTemplateElement:N,Node:D,Element:w,NodeFilter:B,NamedNodeMap:G=n.NamedNodeMap||n.MozNamedAttrMap,HTMLFormElement:W,DOMParser:Y,trustedTypes:j}=n,q=w.prototype,$=O(q,\"cloneNode\"),V=O(q,\"remove\"),re=O(q,\"nextSibling\"),ie=O(q,\"childNodes\"),ae=O(q,\"parentNode\");if(\"function\"==typeof N){const e=r.createElement(\"template\");e.content&&e.content.ownerDocument&&(r=e.content.ownerDocument)}let le,ce=\"\";const{implementation:se,createNodeIterator:ue,createDocumentFragment:me,getElementsByTagName:pe}=r,{importNode:fe}=a;let de={afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]};o.isSupported=\"function\"==typeof e&&\"function\"==typeof ae&&se&&void 0!==se.createHTMLDocument;const{MUSTACHE_EXPR:he,ERB_EXPR:ge,TMPLIT_EXPR:Te,DATA_ATTR:ye,ARIA_ATTR:Ee,IS_SCRIPT_OR_DATA:Ae,ATTR_WHITESPACE:_e,CUSTOM_ELEMENT:be}=Z;let{IS_ALLOWED_URI:Se}=Z,Ne=null;const De=R({},[...v,...x,...L,...I,...U]);let Re=null;const we=R({},[...z,...P,...F,...H]);let Ce=Object.seal(l(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),Oe=null,ve=null;const xe=Object.seal(l(null,{tagCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeCheck:{writable:!0,configurable:!1,enumerable:!0,value:null}}));let Le=!0,ke=!0,Ie=!1,Me=!0,Ue=!1,ze=!0,Pe=!1,Fe=!1,He=!1,Be=!1,Ge=!1,We=!1,Ye=!0,je=!1,Xe=!0,qe=!1,$e={},Ke=null;const Ve=R({},[\"annotation-xml\",\"audio\",\"colgroup\",\"desc\",\"foreignobject\",\"head\",\"iframe\",\"math\",\"mi\",\"mn\",\"mo\",\"ms\",\"mtext\",\"noembed\",\"noframes\",\"noscript\",\"plaintext\",\"script\",\"style\",\"svg\",\"template\",\"thead\",\"title\",\"video\",\"xmp\"]);let Ze=null;const Je=R({},[\"audio\",\"video\",\"img\",\"source\",\"image\",\"track\"]);let Qe=null;const et=R({},[\"alt\",\"class\",\"for\",\"id\",\"label\",\"name\",\"pattern\",\"placeholder\",\"role\",\"summary\",\"title\",\"value\",\"style\",\"xmlns\"]),tt=\"http://www.w3.org/1998/Math/MathML\",nt=\"http://www.w3.org/2000/svg\",ot=\"http://www.w3.org/1999/xhtml\";let rt=ot,it=!1,at=null;const lt=R({},[tt,nt,ot],g);let ct=R({},[\"mi\",\"mo\",\"mn\",\"ms\",\"mtext\"]),st=R({},[\"annotation-xml\"]);const ut=R({},[\"title\",\"style\",\"font\",\"a\",\"script\"]);let mt=null;const pt=[\"application/xhtml+xml\",\"text/html\"];let ft=null,dt=null;const ht=r.createElement(\"form\"),gt=function(e){return e instanceof RegExp||e instanceof Function},Tt=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!dt||dt!==e){if(e&&\"object\"==typeof e||(e={}),e=C(e),mt=-1===pt.indexOf(e.PARSER_MEDIA_TYPE)?\"text/html\":e.PARSER_MEDIA_TYPE,ft=\"application/xhtml+xml\"===mt?g:h,Ne=_(e,\"ALLOWED_TAGS\")?R({},e.ALLOWED_TAGS,ft):De,Re=_(e,\"ALLOWED_ATTR\")?R({},e.ALLOWED_ATTR,ft):we,at=_(e,\"ALLOWED_NAMESPACES\")?R({},e.ALLOWED_NAMESPACES,g):lt,Qe=_(e,\"ADD_URI_SAFE_ATTR\")?R(C(et),e.ADD_URI_SAFE_ATTR,ft):et,Ze=_(e,\"ADD_DATA_URI_TAGS\")?R(C(Je),e.ADD_DATA_URI_TAGS,ft):Je,Ke=_(e,\"FORBID_CONTENTS\")?R({},e.FORBID_CONTENTS,ft):Ve,Oe=_(e,\"FORBID_TAGS\")?R({},e.FORBID_TAGS,ft):C({}),ve=_(e,\"FORBID_ATTR\")?R({},e.FORBID_ATTR,ft):C({}),$e=!!_(e,\"USE_PROFILES\")&&e.USE_PROFILES,Le=!1!==e.ALLOW_ARIA_ATTR,ke=!1!==e.ALLOW_DATA_ATTR,Ie=e.ALLOW_UNKNOWN_PROTOCOLS||!1,Me=!1!==e.ALLOW_SELF_CLOSE_IN_ATTR,Ue=e.SAFE_FOR_TEMPLATES||!1,ze=!1!==e.SAFE_FOR_XML,Pe=e.WHOLE_DOCUMENT||!1,Be=e.RETURN_DOM||!1,Ge=e.RETURN_DOM_FRAGMENT||!1,We=e.RETURN_TRUSTED_TYPE||!1,He=e.FORCE_BODY||!1,Ye=!1!==e.SANITIZE_DOM,je=e.SANITIZE_NAMED_PROPS||!1,Xe=!1!==e.KEEP_CONTENT,qe=e.IN_PLACE||!1,Se=e.ALLOWED_URI_REGEXP||X,rt=e.NAMESPACE||ot,ct=e.MATHML_TEXT_INTEGRATION_POINTS||ct,st=e.HTML_INTEGRATION_POINTS||st,Ce=e.CUSTOM_ELEMENT_HANDLING||{},e.CUSTOM_ELEMENT_HANDLING&&gt(e.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(Ce.tagNameCheck=e.CUSTOM_ELEMENT_HANDLING.tagNameCheck),e.CUSTOM_ELEMENT_HANDLING&&gt(e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(Ce.attributeNameCheck=e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),e.CUSTOM_ELEMENT_HANDLING&&\"boolean\"==typeof e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements&&(Ce.allowCustomizedBuiltInElements=e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Ue&&(ke=!1),Ge&&(Be=!0),$e&&(Ne=R({},U),Re=[],!0===$e.html&&(R(Ne,v),R(Re,z)),!0===$e.svg&&(R(Ne,x),R(Re,P),R(Re,H)),!0===$e.svgFilters&&(R(Ne,L),R(Re,P),R(Re,H)),!0===$e.mathMl&&(R(Ne,I),R(Re,F),R(Re,H))),e.ADD_TAGS&&(\"function\"==typeof e.ADD_TAGS?xe.tagCheck=e.ADD_TAGS:(Ne===De&&(Ne=C(Ne)),R(Ne,e.ADD_TAGS,ft))),e.ADD_ATTR&&(\"function\"==typeof e.ADD_ATTR?xe.attributeCheck=e.ADD_ATTR:(Re===we&&(Re=C(Re)),R(Re,e.ADD_ATTR,ft))),e.ADD_URI_SAFE_ATTR&&R(Qe,e.ADD_URI_SAFE_ATTR,ft),e.FORBID_CONTENTS&&(Ke===Ve&&(Ke=C(Ke)),R(Ke,e.FORBID_CONTENTS,ft)),e.ADD_FORBID_CONTENTS&&(Ke===Ve&&(Ke=C(Ke)),R(Ke,e.ADD_FORBID_CONTENTS,ft)),Xe&&(Ne[\"#text\"]=!0),Pe&&R(Ne,[\"html\",\"head\",\"body\"]),Ne.table&&(R(Ne,[\"tbody\"]),delete Oe.tbody),e.TRUSTED_TYPES_POLICY){if(\"function\"!=typeof e.TRUSTED_TYPES_POLICY.createHTML)throw S('TRUSTED_TYPES_POLICY configuration option must provide a \"createHTML\" hook.');if(\"function\"!=typeof e.TRUSTED_TYPES_POLICY.createScriptURL)throw S('TRUSTED_TYPES_POLICY configuration option must provide a \"createScriptURL\" hook.');le=e.TRUSTED_TYPES_POLICY,ce=le.createHTML(\"\")}else void 0===le&&(le=function(e,t){if(\"object\"!=typeof e||\"function\"!=typeof e.createPolicy)return null;let n=null;const o=\"data-tt-policy-suffix\";t&&t.hasAttribute(o)&&(n=t.getAttribute(o));const r=\"dompurify\"+(n?\"#\"+n:\"\");try{return e.createPolicy(r,{createHTML:e=>e,createScriptURL:e=>e})}catch(e){return console.warn(\"TrustedTypes policy \"+r+\" could not be created.\"),null}}(j,c)),null!==le&&\"string\"==typeof ce&&(ce=le.createHTML(\"\"));i&&i(e),dt=e}},yt=R({},[...x,...L,...k]),Et=R({},[...I,...M]),At=function(e){f(o.removed,{element:e});try{ae(e).removeChild(e)}catch(t){V(e)}},_t=function(e,t){try{f(o.removed,{attribute:t.getAttributeNode(e),from:t})}catch(e){f(o.removed,{attribute:null,from:t})}if(t.removeAttribute(e),\"is\"===e)if(Be||Ge)try{At(t)}catch(e){}else try{t.setAttribute(e,\"\")}catch(e){}},bt=function(e){let t=null,n=null;if(He)e=\"<remove></remove>\"+e;else{const t=T(e,/^[\\r\\n\\t ]+/);n=t&&t[0]}\"application/xhtml+xml\"===mt&&rt===ot&&(e='<html xmlns=\"http://www.w3.org/1999/xhtml\"><head></head><body>'+e+\"</body></html>\");const o=le?le.createHTML(e):e;if(rt===ot)try{t=(new Y).parseFromString(o,mt)}catch(e){}if(!t||!t.documentElement){t=se.createDocument(rt,\"template\",null);try{t.documentElement.innerHTML=it?ce:o}catch(e){}}const i=t.body||t.documentElement;return e&&n&&i.insertBefore(r.createTextNode(n),i.childNodes[0]||null),rt===ot?pe.call(t,Pe?\"html\":\"body\")[0]:Pe?t.documentElement:i},St=function(e){return ue.call(e.ownerDocument||e,e,B.SHOW_ELEMENT|B.SHOW_COMMENT|B.SHOW_TEXT|B.SHOW_PROCESSING_INSTRUCTION|B.SHOW_CDATA_SECTION,null)},Nt=function(e){return e instanceof W&&(\"string\"!=typeof e.nodeName||\"string\"!=typeof e.textContent||\"function\"!=typeof e.removeChild||!(e.attributes instanceof G)||\"function\"!=typeof e.removeAttribute||\"function\"!=typeof e.setAttribute||\"string\"!=typeof e.namespaceURI||\"function\"!=typeof e.insertBefore||\"function\"!=typeof e.hasChildNodes)},Dt=function(e){return\"function\"==typeof D&&e instanceof D};function Rt(e,t,n){u(e,(e=>{e.call(o,t,n,dt)}))}const wt=function(e){let t=null;if(Rt(de.beforeSanitizeElements,e,null),Nt(e))return At(e),!0;const n=ft(e.nodeName);if(Rt(de.uponSanitizeElement,e,{tagName:n,allowedTags:Ne}),ze&&e.hasChildNodes()&&!Dt(e.firstElementChild)&&b(/<[/\\w!]/g,e.innerHTML)&&b(/<[/\\w!]/g,e.textContent))return At(e),!0;if(e.nodeType===ee)return At(e),!0;if(ze&&e.nodeType===te&&b(/<[/\\w]/g,e.data))return At(e),!0;if(!(xe.tagCheck instanceof Function&&xe.tagCheck(n))&&(!Ne[n]||Oe[n])){if(!Oe[n]&&Ot(n)){if(Ce.tagNameCheck instanceof RegExp&&b(Ce.tagNameCheck,n))return!1;if(Ce.tagNameCheck instanceof Function&&Ce.tagNameCheck(n))return!1}if(Xe&&!Ke[n]){const t=ae(e)||e.parentNode,n=ie(e)||e.childNodes;if(n&&t){for(let o=n.length-1;o>=0;--o){const r=$(n[o],!0);r.__removalCount=(e.__removalCount||0)+1,t.insertBefore(r,re(e))}}}return At(e),!0}return e instanceof w&&!function(e){let t=ae(e);t&&t.tagName||(t={namespaceURI:rt,tagName:\"template\"});const n=h(e.tagName),o=h(t.tagName);return!!at[e.namespaceURI]&&(e.namespaceURI===nt?t.namespaceURI===ot?\"svg\"===n:t.namespaceURI===tt?\"svg\"===n&&(\"annotation-xml\"===o||ct[o]):Boolean(yt[n]):e.namespaceURI===tt?t.namespaceURI===ot?\"math\"===n:t.namespaceURI===nt?\"math\"===n&&st[o]:Boolean(Et[n]):e.namespaceURI===ot?!(t.namespaceURI===nt&&!st[o])&&!(t.namespaceURI===tt&&!ct[o])&&!Et[n]&&(ut[n]||!yt[n]):!(\"application/xhtml+xml\"!==mt||!at[e.namespaceURI]))}(e)?(At(e),!0):\"noscript\"!==n&&\"noembed\"!==n&&\"noframes\"!==n||!b(/<\\/no(script|embed|frames)/i,e.innerHTML)?(Ue&&e.nodeType===Q&&(t=e.textContent,u([he,ge,Te],(e=>{t=y(t,e,\" \")})),e.textContent!==t&&(f(o.removed,{element:e.cloneNode()}),e.textContent=t)),Rt(de.afterSanitizeElements,e,null),!1):(At(e),!0)},Ct=function(e,t,n){if(Ye&&(\"id\"===t||\"name\"===t)&&(n in r||n in ht))return!1;if(ke&&!ve[t]&&b(ye,t));else if(Le&&b(Ee,t));else if(xe.attributeCheck instanceof Function&&xe.attributeCheck(t,e));else if(!Re[t]||ve[t]){if(!(Ot(e)&&(Ce.tagNameCheck instanceof RegExp&&b(Ce.tagNameCheck,e)||Ce.tagNameCheck instanceof Function&&Ce.tagNameCheck(e))&&(Ce.attributeNameCheck instanceof RegExp&&b(Ce.attributeNameCheck,t)||Ce.attributeNameCheck instanceof Function&&Ce.attributeNameCheck(t,e))||\"is\"===t&&Ce.allowCustomizedBuiltInElements&&(Ce.tagNameCheck instanceof RegExp&&b(Ce.tagNameCheck,n)||Ce.tagNameCheck instanceof Function&&Ce.tagNameCheck(n))))return!1}else if(Qe[t]);else if(b(Se,y(n,_e,\"\")));else if(\"src\"!==t&&\"xlink:href\"!==t&&\"href\"!==t||\"script\"===e||0!==E(n,\"data:\")||!Ze[e]){if(Ie&&!b(Ae,y(n,_e,\"\")));else if(n)return!1}else;return!0},Ot=function(e){return\"annotation-xml\"!==e&&T(e,be)},vt=function(e){Rt(de.beforeSanitizeAttributes,e,null);const{attributes:t}=e;if(!t||Nt(e))return;const n={attrName:\"\",attrValue:\"\",keepAttr:!0,allowedAttributes:Re,forceKeepAttr:void 0};let r=t.length;for(;r--;){const i=t[r],{name:a,namespaceURI:l,value:c}=i,s=ft(a),m=c;let f=\"value\"===a?m:A(m);if(n.attrName=s,n.attrValue=f,n.keepAttr=!0,n.forceKeepAttr=void 0,Rt(de.uponSanitizeAttribute,e,n),f=n.attrValue,!je||\"id\"!==s&&\"name\"!==s||(_t(a,e),f=\"user-content-\"+f),ze&&b(/((--!?|])>)|<\\/(style|title|textarea)/i,f)){_t(a,e);continue}if(\"attributename\"===s&&T(f,\"href\")){_t(a,e);continue}if(n.forceKeepAttr)continue;if(!n.keepAttr){_t(a,e);continue}if(!Me&&b(/\\/>/i,f)){_t(a,e);continue}Ue&&u([he,ge,Te],(e=>{f=y(f,e,\" \")}));const d=ft(e.nodeName);if(Ct(d,s,f)){if(le&&\"object\"==typeof j&&\"function\"==typeof j.getAttributeType)if(l);else switch(j.getAttributeType(d,s)){case\"TrustedHTML\":f=le.createHTML(f);break;case\"TrustedScriptURL\":f=le.createScriptURL(f)}if(f!==m)try{l?e.setAttributeNS(l,a,f):e.setAttribute(a,f),Nt(e)?At(e):p(o.removed)}catch(t){_t(a,e)}}else _t(a,e)}Rt(de.afterSanitizeAttributes,e,null)},xt=function e(t){let n=null;const o=St(t);for(Rt(de.beforeSanitizeShadowDOM,t,null);n=o.nextNode();)Rt(de.uponSanitizeShadowNode,n,null),wt(n),vt(n),n.content instanceof s&&e(n.content);Rt(de.afterSanitizeShadowDOM,t,null)};return o.sanitize=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=null,r=null,i=null,l=null;if(it=!e,it&&(e=\"\\x3c!--\\x3e\"),\"string\"!=typeof e&&!Dt(e)){if(\"function\"!=typeof e.toString)throw S(\"toString is not a function\");if(\"string\"!=typeof(e=e.toString()))throw S(\"dirty is not a string, aborting\")}if(!o.isSupported)return e;if(Fe||Tt(t),o.removed=[],\"string\"==typeof e&&(qe=!1),qe){if(e.nodeName){const t=ft(e.nodeName);if(!Ne[t]||Oe[t])throw S(\"root node is forbidden and cannot be sanitized in-place\")}}else if(e instanceof D)n=bt(\"\\x3c!----\\x3e\"),r=n.ownerDocument.importNode(e,!0),r.nodeType===J&&\"BODY\"===r.nodeName||\"HTML\"===r.nodeName?n=r:n.appendChild(r);else{if(!Be&&!Ue&&!Pe&&-1===e.indexOf(\"<\"))return le&&We?le.createHTML(e):e;if(n=bt(e),!n)return Be?null:We?ce:\"\"}n&&He&&At(n.firstChild);const c=St(qe?e:n);for(;i=c.nextNode();)wt(i),vt(i),i.content instanceof s&&xt(i.content);if(qe)return e;if(Be){if(Ge)for(l=me.call(n.ownerDocument);n.firstChild;)l.appendChild(n.firstChild);else l=n;return(Re.shadowroot||Re.shadowrootmode)&&(l=fe.call(a,l,!0)),l}let m=Pe?n.outerHTML:n.innerHTML;return Pe&&Ne[\"!doctype\"]&&n.ownerDocument&&n.ownerDocument.doctype&&n.ownerDocument.doctype.name&&b(K,n.ownerDocument.doctype.name)&&(m=\"<!DOCTYPE \"+n.ownerDocument.doctype.name+\">\\n\"+m),Ue&&u([he,ge,Te],(e=>{m=y(m,e,\" \")})),le&&We?le.createHTML(m):m},o.setConfig=function(){Tt(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),Fe=!0},o.clearConfig=function(){dt=null,Fe=!1},o.isValidAttribute=function(e,t,n){dt||Tt({});const o=ft(e),r=ft(t);return Ct(o,r,n)},o.addHook=function(e,t){\"function\"==typeof t&&f(de[e],t)},o.removeHook=function(e,t){if(void 0!==t){const n=m(de[e],t);return-1===n?void 0:d(de[e],n,1)[0]}return p(de[e])},o.removeHooks=function(e){de[e]=[]},o.removeAllHooks=function(){de={afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}},o}();return re}));\n//# sourceMappingURL=purify.min.js.map\n</script>\n\n<script>\n(function() {\n  'use strict';\n\n  // ============================================================\n  // PARSER — copied verbatim from src/parser.js\n  // ============================================================\n\n  /**\n   * parseScript\n   * @param {string} text - raw .md file content\n   * @returns {{ title: string, blocks: Array }[]}\n   */\n  function parseScript(text) {\n    const lines = text.split('\\n');\n    const slides = [];\n    let current = { title: '', blocks: [] };\n\n    for (const raw of lines) {\n      const line = raw.trim();\n\n      if (!line || line === '---') continue;\n\n      // Slide boundary\n      if (line.startsWith('## ')) {\n        if (current.blocks.length > 0 || current.title) {\n          slides.push(current);\n        }\n        current = { title: line.slice(3).trim(), blocks: [] };\n        continue;\n      }\n\n      // Block-level cue: line is *only* [TAG optional note]\n      // The tag must begin with an uppercase word. After the all-caps keyword(s)\n      // the rest is free-form note text (may include lowercase, punctuation, etc.).\n      const blockMatch = line.match(/^\\[([A-Z][A-Z ]*(?:[\\u2014\\-.,!?\\s].*)?)\\]$/);\n      if (blockMatch) {\n        const tag = blockMatch[1].trim();\n        if (tag === 'CLICK') {\n          current.blocks.push({ type: 'click' });\n        } else if (tag.startsWith('NOTE')) {\n          current.blocks.push({ type: 'note', text: tag.slice(4).trim() });\n        } else {\n          // PAUSE, LOOK UP, SMILE, and any other all-caps cue\n          const spaceIdx = tag.indexOf(' ');\n          const note = spaceIdx >= 0 ? tag.slice(spaceIdx).trim() : '';\n          current.blocks.push({ type: 'pause', note });\n        }\n        continue;\n      }\n\n      // Spoken line — process inline markup\n      current.blocks.push({ type: 'line', html: processInline(line) });\n    }\n\n    slides.push(current);\n    return slides;\n  }\n\n  /**\n   * processInline — converts a plain text line to safe HTML.\n   * Escapes HTML entities first, then applies markup.\n   * The result must still pass through DOMPurify before DOM insertion.\n   * @param {string} text\n   * @returns {string}\n   */\n  function processInline(text) {\n    // 1. Escape HTML entities to prevent injection\n    let html = text\n      .replace(/&/g, '&amp;')\n      .replace(/</g, '&lt;')\n      .replace(/>/g, '&gt;');\n\n    // 2. **bold** → slow emphasis span\n    html = html.replace(/\\*\\*(.+?)\\*\\*/g, '<span class=\"slow\">$1</span>');\n\n    // 3. [ALL CAPS] inline direction — only matches all-caps content\n    html = html.replace(/\\[([A-Z][A-Z ]*(?:[\\u2014\\-.,!?\\s].*)?)\\]/g, '<span class=\"d\">[$1]</span>');\n\n    return html;\n  }\n\n  // ============================================================\n  // TELEPROMPTER STATE (outer scope so loadNewBtn can reach them)\n  // ============================================================\n\n  var teleprompterInited = false;\n\n  // Mutable DOM collections — refreshed on each script load\n  var tpLines = [];\n  var tpSections = [];\n  var tpPips = [];\n\n  // Highlight\n  var activeIndex = -1;\n\n  // Timer\n  var timerRunning = false;\n  var timerStart = 0;\n  var timerInterval = null;\n\n  // Auto-scroll\n  var scrollActive = false;\n  var scrollLevel = 3; // 1-7, default 3\n  var scrollRAF = null;\n  var lastFrameTime = null;\n  var scrollAccumulator = 0;\n\n  var SPEED_LEVELS = [\n    { px: 12,  name: '1' },\n    { px: 18,  name: '2' },\n    { px: 27,  name: '3' },\n    { px: 40,  name: '4' },\n    { px: 60,  name: '5' },\n    { px: 90,  name: '6' },\n    { px: 135, name: '7' },\n  ];\n\n  // IntersectionObserver instance — disconnected and recreated per script load\n  var slideObserver = null;\n\n  // Forward-declared functions (assigned in initTeleprompter)\n  var stopScroll;\n  var startScroll;\n  var changeSpeed;\n  var setActive;\n\n  // ============================================================\n  // RENDERER\n  // ============================================================\n\n  function renderScript(slides) {\n    var frag = document.createDocumentFragment();\n\n    slides.forEach(function(slide, slideIndex) {\n      // Divider before non-first slides\n      if (slideIndex > 0) {\n        var hr = document.createElement('hr');\n        hr.className = 'slide-divider';\n        frag.appendChild(hr);\n      }\n\n      var section = document.createElement('div');\n      section.className = 'slide-section';\n      section.id = 'slide-' + slideIndex;\n\n      // Slide header\n      if (slide.title) {\n        var header = document.createElement('div');\n        header.className = 'slide-header';\n        header.textContent = slide.title;\n        section.appendChild(header);\n      }\n\n      // Blocks\n      slide.blocks.forEach(function(block) {\n        var el = document.createElement('div');\n        if (block.type === 'click') {\n          el.className = 'd-click';\n          el.textContent = 'CLICK';\n        } else if (block.type === 'pause') {\n          el.className = 'd-pause';\n          el.textContent = '[PAUSE' + (block.note ? ' ' + block.note : '') + ']';\n        } else if (block.type === 'note') {\n          el.className = 'd-note';\n          el.textContent = '[NOTE' + (block.text ? ' ' + block.text : '') + ']';\n        } else if (block.type === 'line') {\n          el.className = 'line';\n          // DOMPurify sanitises the pre-processed HTML before DOM insertion\n          var clean = DOMPurify.sanitize(block.html, {\n            ALLOWED_TAGS: ['span', 'em', 'strong'],\n            ALLOWED_ATTR: ['class']\n          });\n          el.appendChild(createSanitisedFragment(clean));\n        }\n        section.appendChild(el);\n      });\n\n      frag.appendChild(section);\n    });\n\n    // Replace content atomically\n    var scriptContent = document.getElementById('scriptContent');\n    while (scriptContent.firstChild) {\n      scriptContent.removeChild(scriptContent.firstChild);\n    }\n    scriptContent.appendChild(frag);\n\n    // Populate slide pips\n    var slideNav = document.getElementById('slideNav');\n    while (slideNav.firstChild) {\n      slideNav.removeChild(slideNav.firstChild);\n    }\n    slides.forEach(function(slide, index) {\n      var pip = document.createElement('div');\n      pip.className = 'slide-pip';\n      pip.dataset.slide = index;\n      pip.title = slide.title || ('Slide ' + (index + 1));\n      slideNav.appendChild(pip);\n    });\n  }\n\n  /**\n   * createSanitisedFragment — converts a DOMPurify-sanitised HTML string\n   * into a DocumentFragment for safe insertion.\n   */\n  function createSanitisedFragment(sanitisedHtml) {\n    var template = document.createElement('template');\n    template.innerHTML = sanitisedHtml;\n    return template.content;\n  }\n\n  // ============================================================\n  // SCRIPT LOADING\n  // ============================================================\n\n  function loadScript(text) {\n    var slides = parseScript(text);\n    renderScript(slides);\n    document.getElementById('drop-zone').style.display = 'none';\n    document.getElementById('teleprompter').style.display = '';\n    window.scrollTo(0, 0);\n\n    if (!teleprompterInited) {\n      initTeleprompter();\n      teleprompterInited = true;\n    } else {\n      refreshTeleprompter();\n    }\n  }\n\n  function handleFile(file) {\n    var reader = new FileReader();\n    reader.onload = function() {\n      loadScript(reader.result);\n    };\n    reader.onerror = function() { alert('Could not read file.'); };\n    reader.readAsText(file);\n  }\n\n  // Drag and drop\n  var dropTarget = document.getElementById('dropTarget');\n\n  dropTarget.addEventListener('dragover', function(e) {\n    e.preventDefault();\n    dropTarget.classList.add('drag-over');\n  });\n\n  dropTarget.addEventListener('dragleave', function() {\n    dropTarget.classList.remove('drag-over');\n  });\n\n  dropTarget.addEventListener('drop', function(e) {\n    e.preventDefault();\n    dropTarget.classList.remove('drag-over');\n    var files = e.dataTransfer.files;\n    if (files.length > 0) {\n      handleFile(files[0]);\n    }\n  });\n\n  // File input fallback\n  document.getElementById('fileInput').addEventListener('change', function(e) {\n    if (e.target.files.length > 0) {\n      handleFile(e.target.files[0]);\n    }\n  });\n\n  // Demo link\n  document.getElementById('demoLink').addEventListener('click', function(e) {\n    e.preventDefault();\n    fetch('./scripts/jfk-inaugural.md')\n      .then(function(r) {\n        if (!r.ok) throw new Error('Demo script not found (' + r.status + ')');\n        return r.text();\n      })\n      .then(function(text) { loadScript(text); })\n      .catch(function(err) { alert('Could not load demo: ' + err.message); });\n  });\n\n  // Load new script button\n  document.getElementById('loadNewBtn').addEventListener('click', function() {\n    // Stop auto-scroll if active\n    if (scrollActive && stopScroll) stopScroll();\n    // Stop timer if running\n    if (timerRunning) {\n      clearInterval(timerInterval);\n      timerInterval = null;\n      timerRunning = false;\n    }\n\n    document.getElementById('teleprompter').style.display = 'none';\n    document.getElementById('drop-zone').style.display = '';\n    var scriptContent = document.getElementById('scriptContent');\n    while (scriptContent.firstChild) {\n      scriptContent.removeChild(scriptContent.firstChild);\n    }\n    var slideNav = document.getElementById('slideNav');\n    while (slideNav.firstChild) {\n      slideNav.removeChild(slideNav.firstChild);\n    }\n    document.getElementById('settingsPanel').classList.remove('visible');\n    // Reset progress\n    document.getElementById('progressFill').style.width = '0%';\n    // Reset timer display\n    document.getElementById('timerDisplay').textContent = '00:00';\n    document.getElementById('timer').classList.remove('running');\n  });\n\n  // On page load: check for shared script ID\n  var scriptId = document.body.dataset.scriptId;\n  if (scriptId) {\n    fetch('/script/' + scriptId)\n      .then(function(r) {\n        if (!r.ok) throw new Error('Script not found');\n        return r.text();\n      })\n      .then(function(text) { loadScript(text); })\n      .catch(function() {\n        var dropTarget = document.getElementById('dropTarget');\n        var errMsg = document.createElement('div');\n        errMsg.style.cssText = 'color: var(--click); margin-top: 12px; font-size: 14px;';\n        errMsg.textContent = 'The shared script could not be found. It may have expired or been removed.';\n        dropTarget.parentNode.insertBefore(errMsg, dropTarget.nextSibling);\n      });\n  }\n\n  // ============================================================\n  // TELEPROMPTER INTERACTIONS\n  // (Adapted from psd3-teleprompter.html — re-queries DOM after render)\n  // ============================================================\n\n  /**\n   * refreshTeleprompter — re-queries DOM collections that change on each\n   * script load (lines, sections, pips) and reconnects the\n   * IntersectionObserver. Resets highlight and scroll state.\n   */\n  function refreshTeleprompter() {\n    tpLines = document.querySelectorAll('.line');\n    tpSections = document.querySelectorAll('.slide-section');\n    tpPips = document.querySelectorAll('.slide-pip');\n\n    // Reset state\n    activeIndex = -1;\n    if (scrollActive && stopScroll) stopScroll();\n\n    // Reconnect IntersectionObserver for new sections\n    if (slideObserver) slideObserver.disconnect();\n    slideObserver = new IntersectionObserver(function(entries) {\n      entries.forEach(function(entry) {\n        if (entry.isIntersecting) {\n          var slideId = entry.target.id;\n          tpPips.forEach(function(p) {\n            p.classList.toggle('active', 'slide-' + p.dataset.slide === slideId);\n          });\n        }\n      });\n    }, { threshold: 0.3 });\n    tpSections.forEach(function(s) { slideObserver.observe(s); });\n\n    // Re-attach pip click listeners (pips are new DOM elements)\n    tpPips.forEach(function(pip) {\n      pip.addEventListener('click', function(e) {\n        e.stopPropagation();\n        if (scrollActive) stopScroll();\n        var section = document.getElementById('slide-' + pip.dataset.slide);\n        if (section) {\n          section.scrollIntoView({ behavior: 'smooth', block: 'start' });\n          var firstLine = section.querySelector('.line');\n          if (firstLine) {\n            var idx = Array.from(tpLines).indexOf(firstLine);\n            if (idx >= 0) setActive(idx);\n          }\n        }\n      });\n    });\n  }\n\n  /**\n   * initTeleprompter — called exactly once on the first script load.\n   * Registers all global event listeners and performs the initial\n   * DOM query via refreshTeleprompter().\n   */\n  function initTeleprompter() {\n    var htmlEl = document.documentElement;\n    var timerEl = document.getElementById('timer');\n    var timerDisplay = document.getElementById('timerDisplay');\n    var progressFill = document.getElementById('progressFill');\n    var scrollIndicator = document.getElementById('scrollIndicator');\n    var scrollDots = document.querySelectorAll('#scrollDots .dot');\n    var scrollSpeedName = document.getElementById('scrollSpeedName');\n    var scrollGlow = document.getElementById('scrollGlow');\n    var mainContainer = document.getElementById('mainContainer');\n\n    // HIGHLIGHT\n    setActive = function(index) {\n      tpLines.forEach(function(l) { l.classList.remove('active'); });\n      if (index >= 0 && index < tpLines.length) {\n        activeIndex = index;\n        tpLines[index].classList.add('active');\n        updateProgress();\n        updateSlidePips();\n      }\n    };\n\n    function updateProgress() {\n      var pct = ((activeIndex + 1) / tpLines.length) * 100;\n      progressFill.style.width = pct + '%';\n    }\n\n    function updateSlidePips() {\n      if (activeIndex < 0) return;\n      var section = tpLines[activeIndex].closest('.slide-section');\n      if (!section) return;\n      var slideId = section.id;\n      tpPips.forEach(function(p) {\n        p.classList.toggle('active', 'slide-' + p.dataset.slide === slideId);\n      });\n    }\n\n    // AUTO-SCROLL\n    function updateSpeedDisplay() {\n      scrollDots.forEach(function(dot, i) {\n        dot.classList.toggle('filled', i < scrollLevel);\n      });\n      scrollSpeedName.textContent = SPEED_LEVELS[scrollLevel - 1].name;\n    }\n\n    startScroll = function() {\n      if (scrollActive) return;\n      scrollActive = true;\n      lastFrameTime = null;\n      scrollAccumulator = 0;\n      htmlEl.style.scrollBehavior = 'auto';\n      scrollIndicator.classList.add('visible');\n      scrollGlow.classList.add('visible');\n      updateSpeedDisplay();\n      scrollRAF = requestAnimationFrame(scrollTick);\n    };\n\n    stopScroll = function() {\n      if (!scrollActive) return;\n      scrollActive = false;\n      htmlEl.style.scrollBehavior = 'smooth';\n      scrollIndicator.classList.remove('visible');\n      scrollGlow.classList.remove('visible');\n      if (scrollRAF) {\n        cancelAnimationFrame(scrollRAF);\n        scrollRAF = null;\n      }\n      lastFrameTime = null;\n    };\n\n    function scrollTick(timestamp) {\n      if (!scrollActive) return;\n\n      if (lastFrameTime === null) {\n        lastFrameTime = timestamp;\n        scrollRAF = requestAnimationFrame(scrollTick);\n        return;\n      }\n\n      var delta = (timestamp - lastFrameTime) / 1000;\n      lastFrameTime = timestamp;\n\n      var clampedDelta = Math.min(delta, 0.1);\n\n      var maxScroll = document.documentElement.scrollHeight - window.innerHeight;\n      if (window.scrollY >= maxScroll - 1) {\n        stopScroll();\n        return;\n      }\n\n      var speed = SPEED_LEVELS[scrollLevel - 1].px;\n      scrollAccumulator += speed * clampedDelta;\n\n      var pixels = Math.floor(scrollAccumulator);\n      if (pixels > 0) {\n        scrollAccumulator -= pixels;\n        window.scrollBy(0, pixels);\n      }\n\n      scrollRAF = requestAnimationFrame(scrollTick);\n    }\n\n    changeSpeed = function(delta) {\n      var newLevel = scrollLevel + delta;\n      if (newLevel < 1 || newLevel > SPEED_LEVELS.length) return;\n      scrollLevel = newLevel;\n      updateSpeedDisplay();\n    };\n\n    // KEYBOARD (registered once)\n    document.addEventListener('keydown', function(e) {\n      // Only respond when teleprompter is visible\n      if (document.getElementById('teleprompter').style.display === 'none') return;\n\n      if (e.key === 'Escape') {\n        if (scrollActive) {\n          e.preventDefault();\n          stopScroll();\n        }\n        var panel = document.getElementById('settingsPanel');\n        if (panel.classList.contains('visible')) {\n          panel.classList.remove('visible');\n        }\n        return;\n      }\n\n      if (e.key === 'ArrowDown') {\n        e.preventDefault();\n        if (!scrollActive) {\n          startScroll();\n        } else {\n          changeSpeed(1);\n        }\n        return;\n      }\n\n      if (e.key === 'ArrowUp') {\n        e.preventDefault();\n        if (scrollActive) {\n          changeSpeed(-1);\n        }\n        return;\n      }\n\n      if (e.key === 'j') {\n        e.preventDefault();\n        var next = Math.min(activeIndex + 1, tpLines.length - 1);\n        setActive(next);\n        if (!scrollActive) {\n          tpLines[next].scrollIntoView({ behavior: 'smooth', block: 'center' });\n        }\n        return;\n      }\n      if (e.key === 'k') {\n        e.preventDefault();\n        var prev = Math.max(activeIndex - 1, 0);\n        setActive(prev);\n        if (!scrollActive) {\n          tpLines[prev].scrollIntoView({ behavior: 'smooth', block: 'center' });\n        }\n        return;\n      }\n    });\n\n    // CLICK — stop scroll OR highlight paragraph (registered once on mainContainer)\n    mainContainer.addEventListener('click', function(e) {\n      if (scrollActive) {\n        stopScroll();\n        return;\n      }\n\n      var line = e.target.closest('.line');\n      if (line) {\n        var idx = Array.from(tpLines).indexOf(line);\n        if (idx >= 0) setActive(idx);\n      }\n    });\n\n    // Also stop on click outside container (registered once)\n    document.body.addEventListener('click', function(e) {\n      if (scrollActive && !timerEl.contains(e.target) && !document.getElementById('slideNav').contains(e.target)) {\n        stopScroll();\n      }\n    }, true);\n\n    // SCROLL WHEEL (registered once)\n    window.addEventListener('wheel', function() {\n      if (scrollActive) stopScroll();\n    }, { passive: true });\n\n    // WINDOW BLUR (registered once)\n    window.addEventListener('blur', function() {\n      if (scrollActive) stopScroll();\n    });\n\n    // TIMER (registered once)\n    timerEl.addEventListener('click', function(e) {\n      e.stopPropagation();\n      if (timerRunning) {\n        clearInterval(timerInterval);\n        timerInterval = null;\n        timerRunning = false;\n        timerEl.classList.remove('running');\n      } else {\n        if (timerDisplay.textContent === '00:00') {\n          timerStart = Date.now();\n        } else {\n          var parts = timerDisplay.textContent.split(':');\n          var elapsed = parseInt(parts[0]) * 60000 + parseInt(parts[1]) * 1000;\n          timerStart = Date.now() - elapsed;\n        }\n        timerRunning = true;\n        timerEl.classList.add('running');\n        timerInterval = setInterval(function() {\n          var elapsed = Date.now() - timerStart;\n          var mins = Math.floor(elapsed / 60000);\n          var secs = Math.floor((elapsed % 60000) / 1000);\n          timerDisplay.textContent =\n            String(mins).padStart(2, '0') + ':' + String(secs).padStart(2, '0');\n        }, 250);\n      }\n    });\n\n    timerEl.addEventListener('dblclick', function() {\n      clearInterval(timerInterval);\n      timerInterval = null;\n      timerRunning = false;\n      timerEl.classList.remove('running');\n      timerDisplay.textContent = '00:00';\n    });\n\n    // SCROLL-BASED PROGRESS (registered once)\n    window.addEventListener('scroll', function() {\n      var maxScroll = document.documentElement.scrollHeight - window.innerHeight;\n      if (maxScroll > 0) {\n        var pct = (window.scrollY / maxScroll) * 100;\n        progressFill.style.width = pct + '%';\n      }\n    }, { passive: true });\n\n    // Initial DOM query + IntersectionObserver setup\n    refreshTeleprompter();\n  }\n\n  // ============================================================\n  // SETTINGS PANEL\n  // ============================================================\n\n  (function initSettings() {\n    var savedTheme = localStorage.getItem('gp-theme') || 'night';\n    var savedAccent = localStorage.getItem('gp-accent') || 'gold';\n\n    document.documentElement.dataset.theme = savedTheme;\n    document.documentElement.dataset.accent = savedAccent;\n\n    // Check matching radio inputs\n    var themeRadio = document.querySelector('input[name=\"theme\"][value=\"' + savedTheme + '\"]');\n    if (themeRadio) themeRadio.checked = true;\n\n    var accentRadio = document.querySelector('input[name=\"accent\"][value=\"' + savedAccent + '\"]');\n    if (accentRadio) accentRadio.checked = true;\n\n    // Theme radio change\n    document.querySelectorAll('input[name=\"theme\"]').forEach(function(radio) {\n      radio.addEventListener('change', function() {\n        document.documentElement.dataset.theme = radio.value;\n        localStorage.setItem('gp-theme', radio.value);\n      });\n    });\n\n    // Accent radio change\n    document.querySelectorAll('input[name=\"accent\"]').forEach(function(radio) {\n      radio.addEventListener('change', function() {\n        document.documentElement.dataset.accent = radio.value;\n        localStorage.setItem('gp-accent', radio.value);\n      });\n    });\n\n    // Toggle settings panel\n    var settingsBtn = document.getElementById('settingsBtn');\n    var settingsPanel = document.getElementById('settingsPanel');\n\n    settingsBtn.addEventListener('click', function(e) {\n      e.stopPropagation();\n      settingsPanel.classList.toggle('visible');\n    });\n\n    // Click outside panel -> close\n    document.addEventListener('click', function(e) {\n      if (!settingsPanel.contains(e.target) && e.target !== settingsBtn) {\n        settingsPanel.classList.remove('visible');\n      }\n    });\n  })();\n\n})();\n</script>\n\n</body>\n</html>\n";
export default HTML;
